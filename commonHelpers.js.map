{"version":3,"file":"commonHelpers.js","sources":["../src/img/alert-icon.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__5e15ff8a__\"","\"use strict\";\n\n//  ============libraries import==========\n\nimport axios from 'axios';\n\n//  ============main const==========\n\nconst axios1 = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '44411721-4da839cd813b8d67e233adef2',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n  },\n});\n\n//  ============functions==========\n\nexport async function fetchImg(searchedImg, page) {\n  const res = await axios1.get('', {\n    params: {\n      q: searchedImg,\n      page: page,\n    }\n  });\n  return res.data;\n  };\n\n\n\n\n\n\n\n\n","'use strict';\n\n//  ============functions==========\n\nfunction imageTemplate(images) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${images.largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${images.webformatURL}\" alt=\"${images.tags}\" />\n    </a>\n    <ul class=\"info-list\">\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Likes</h4>\n          <p class=\"info-item-value\">${images.likes}</p>\n        </li>\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Views</h4>\n          <p class=\"info-item-value\">${images.views}</p>\n        </li>\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Comments</h4>\n          <p class=\"info-item-value\">${images.comments}</p>\n        </li>\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Downloads</h4>\n          <p class=\"info-item-value\">${images.downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n}\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\n\n\n\n\n\n","'use strict';\n\n//  ============libraries import==========\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n//  ============functions and img import==========\n\nimport imageUrl from './img/alert-icon.svg';\nimport { fetchImg } from './js/pixabay-api';\nimport { imagesTemplate} from './js/render-functions';\n\n//  ============main const==========\n\nconst iziToastOptions = {\n  message:\n    \"We're sorry, but you've reached the end of search results.\",\n  messageColor: 'white',\n  backgroundColor: '#EF4040',\n  iconUrl: imageUrl,\n  maxWidth: '360px',\n  position: 'bottomRight',\n  theme: 'dark',\n};\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\n\nlet inputData = '';\nlet page = 0;\nconst perPage = 15;\nlet maxHits = 0;\n\n//  ============Search button functions==========\n\nform.addEventListener('submit', formElemSubmit);\n\nasync function formElemSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n\n  \n\n  showLoader();\n  \n\n  inputData = e.target.elements.searchImg.value.trim();\n  if (!inputData) {\n    showError('please write something');\n    hideLoadMoreBtn();\n    hideLoader()\n    return;\n  }\n  try {\n    const data = await fetchImg(inputData);\n    maxHits = Math.ceil(data.totalHits / perPage);\n\n    if (maxHits === 0) {\n      showError('no matches');\n      hideLoader();\n      updateBtnStatus();\n      return;\n    }\n\n    const markup = imagesTemplate(data.hits);\n    gallery.innerHTML = markup;\n    lightBox.refresh();\n    showLoadMoreBtn();\n  } catch {\n    iziToast.show('Error!');\n  }\n  hideLoader();\n  updateBtnStatus();\n};\n// ===================load more button function==========================\n\nloadMoreBtn.addEventListener('click', loadMoreBTNSubmit);\nasync function loadMoreBTNSubmit() {\n  showLoader();\n  hideLoadMoreBtn();\n  page += 1;\n  try {\n    const data = await fetchImg(inputData, page);\n    const markup = imagesTemplate(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightBox.refresh();\n    skipElem();\n  } catch {\n    iziToast.show('Error!');\n  }\n  hideLoader();\n  updateBtnStatus();\n}\n// =======================help functions===============================\nfunction showLoader() {\n  loader.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('visually-hidden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('visually-hidden');\n}\n\nfunction updateBtnStatus() {\n  if (page >= maxHits) {\n    hideLoadMoreBtn();\n    \n\n    if (maxHits) {\n      iziToast.info(iziToastOptions);\n    }\n  } else {\n    showLoadMoreBtn();\n  }\n};\n\nfunction showError(message) {\n  iziToast.error({\n    message,\n    position: 'topRight',\n  });\n};\n\nfunction skipElem() {\n  const liElem = gallery.children[0];\n  const heights = liElem.getBoundingClientRect().height;\n  scrollBy({\n    'top': heights*2,\n    'behavior': 'smooth'\n  })\n};\n\n\n"],"names":["imageUrl","axios1","axios","fetchImg","searchedImg","page","imageTemplate","images","imagesTemplate","arr","iziToastOptions","lightBox","SimpleLightbox","form","gallery","loadMoreBtn","loader","inputData","perPage","maxHits","formElemSubmit","showLoader","showError","hideLoadMoreBtn","hideLoader","data","updateBtnStatus","markup","showLoadMoreBtn","iziToast","loadMoreBTNSubmit","skipElem","message","heights"],"mappings":"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"}